<!DOCTYPE HTML>
<!--
	Spatial by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Spatial by TEMPLATED</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="landing">

		<!-- Header -->
			<header id="header" class="alt">
				<!-- <h1><strong><a href="index.html">Spatial</a></strong> by Templated</h1> -->
				<img src="images/logo.png" />
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="generic.html">Generic</a></li>
						<li><a href="elements.html">Elements</a></li>
					</ul>
				</nav>
			</header>

			<a href="#menu" class="navPanelToggle"><span class="fa fa-bars"></span></a>

		<!-- Banner -->
			<section id="banner">
				<h2>Welcome to PingOne Demo</h2>
				<!-- <p>Lorem ipsum dolor sit amet nullam consequat <br /> interdum vivamus donce sed libero.</p> -->
				<!-- <ul class="actions">
					<li><a href="#" class="button big">Start Saving</a></li> -->
					<!-- make button kickoff Auth-code flow -->
				<!-- </ul> -->
				<!-- <ul class="actions">
					<form name="loginform" id="loginform" action="#" method="post">
              <p class="login-username">
								<label for="user_login">Username</label>
                <input type="text" name="log" id="user_login" class="input" value="" size="20" />
              </p>
              <p class="login-password">
                <label for="user_pass">Password</label>
                <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" />
			</p> -->
			</section>
			<!-- Hidden Divs for URLs -->
			<div class="mfn-login" style="display: none;">
				<input type="text" class="form-control" name="validatePasswordUrl" id="validatePasswordUrl" readonly />
			</div>
		  	<!-- <div class="mfn-login" style="display: none;">
			  <input type="text" class="form-control" name="registration.external" id="registerUserUrl" readonly />
		  	</div> -->
		  	<div class="mfn-login" style="display: none;">
				<input type="text" class="form-control" name="forgotPasswordURL" id="forgotPasswordURL" readonly />
		  	</div>
		  	<div class="mfn-login" style="display: none;">
			  	<input type="text" class="form-control" name="socialLoginUrl0" id="socialLoginUrl0" readonly />
				<input type="text" class="form-control" name="socialLoginUrl1" id="socialLoginUrl1" readonly />
		  	</div>
			<!-- end hidden divs -->
			

			<section id = "loginDiv" class = "wrapper">
				<div id = "loginDiv" class="container">
					<form method="post" action="#">
						<div class="row uniform 50%">
							<div class="6u$ 12u$(xsmall)">
								<input type="text" name="user_login" id="user_login" value="" placeholder="Username" />
							</div>
							<div class="6u$ 12u$(xsmall)">
								<input type="password" name="user_pass" id="user_pass" value="" placeholder="Password" />
							</div>
						</div>
					</form>
				</div>
				<div id = "warningDiv" class="container">
					<form method="post" action="#">
						<div class="row uniform 50%">
							<span style="color:red" id="warningMessage" class="confirm-message"></span>
						</div>
					</form>
				</div>
			<br/>
			<div id = "loginDiv" class="row center" style="margin:auto">
			<p class="login-submit">
				<div class = "12u center" style="margin:auto">
					<a class="button button_theme" onclick="validatePassword();" >LogIn</a>
					<input type="hidden" name="redirect_to" value="#" />
						<a class="button button_theme" onclick="resetPassword();">Trouble logging in?</a>
					<input type="hidden" name="redirect_to" value="#" />
						<a class="button button_theme" onclick="redirect_toReg();">Register</a>
					<input type="hidden" name="redirect_to" value="#" />
						<a class="button button_theme" style="visibility: hidden;" id =socialButton0 onclick="redirect_toSocial('0');"></a>
						<input type="hidden" name="redirect_to" value="#" />
						<a class="button button_theme" style="visibility: hidden;" id =socialButton1 onclick="redirect_toSocial('1');"></a>
				</div>
			</p>
			</div>
		</section>
		<section id = "pwResetCodeDiv" class= "wrapper">
			<div class="container"></div>
					<form method="post" action="#">
						<div class="row uniform 50%">
							<div class="6u 12u$(xsmall)">
								<input type="text" name="pwReset_Code" id="pwReset_Code" value="" placeholder="One Time Passcode" />
							</div>
							<div class="6u$ 12u$(xsmall)">
								<input type="password" name="new_password" id="new_password" value="" placeholder="Password" />
							</div>
						</div>
					</form>
				</div>
			<br/>
				<div id = "pwResetCodeDiv">
				<p class="login-submit">
					<a class="button button_theme" onclick="validatePWResetCode();">Set Password</a>
						<input type="hidden" name="redirect_to" value="#" />
					</p>
				</div>
		</section>
		<section id = "idfirst" class= "wrapper">
			<div class="row center" style="margin:auto">
				<p class="login-submit">
					<div class="6u$ 12u$(xsmall)">
						<input type="text" name="userid" id="userid" value="" placeholder="Username" />
					</div>
					<ul class="actions">
						<li><a href="#" class="button" onclick="userLookup();">Continue</a></li> 
					</ul>
					<!-- Hidden Divs for URLs -->
					<div class="mfn-login" style="display: none;">
						<input type="text" class="form-control" name="userlookup" id="userlookup" readonly />
					</div>
		</section>

		<section id = "changePasswordDiv" class= "wrapper">
			<!-- Hidden Divs for URLs -->
			<div class="mfn-login" style="display: none;">
				<input type="text" class="form-control" name="changePasswordUrl" id="changePasswordUrl" readonly />
			</div>
			<div class="container"></div>
					<form method="post" action="#">
						<div class="row uniform 50%">
							<div class="6u 12u$(xsmall)">
								<input type="password" name="current_password" id="current_password" value="" placeholder="Current Password" />
							</div>
							<div class="6u$ 12u$(xsmall)">
								<input type="password" name="change_new_password" id="change_new_password" value="" placeholder="New Password" />
							</div>
						</div>
					</form>
			<br/>
				<p class="login-submit">
					<a class="button button_theme" onclick="changePassword();">Change Password</a>
						<input type="hidden" name="redirect_to" value="#" />
					</p>
				</div>
				<div class="row uniform 50%">
					<span style="color:red" id="warningMessage" class="confirm-message"></span>
				</div>
		</section>

		<section>
			<div class="mfn-login" style="display: none;">
				<input type="text" class="form-control" name="ppURL" id="ppURL" readonly />
			</div>
			<div id="ppDiv" class = "container">
				<h4 id="prompt"> </h4>
				<div class="6u$ 12u$(xsmall)">
					<input type="hidden" class="form-control" name="labelID1" id="labelID1" readonly />
					<label id =label1 style="display:inline-block;"></label>
					<input type="text" name="value1" id="value1" value="" />
					<!-- <div class="mfn-login" style="display: none;">
						<input type="text" class="form-control" name="label1ID" id="label1ID" readonly />
					</div> -->
				</div>
				<div class="6u$ 12u$(xsmall)">
					<input type="hidden" class="form-control" name="labelID2" id="labelID2" readonly />
					<label id =label2 style="display:inline-block;"></label>
					<input type="text" name="value2" id="value2" value="" />
					<!-- <div class="mfn-login" style="display: none;">
						<input type="text" class="form-control" name="label2ID" id="label2ID" readonly />
					</div> -->
				</div>
				<div class="row uniform 50%">
					<span style="color:red" id="warningMessage" class="confirm-message"></span>
				</div>
				<ul class="actions">
					<li><a href="#" class="button" onclick="setPPValues();">Continue</a></li> 
				</ul>
			</div>
			<div id ="pushDiv" view="hide" class="row uniform 50%">
				<h2> Push Sent </h2>
				<div class="mfn-login" style="display: none;">
					<input type="text" class="form-control" name="pushResumeUrl" id="pushResumeUrl" readonly />
				</div>
				<span id="confirm-message2" class="confirm-message"></span>
				<ul class="actions">
					<li><a href="#" class="button" onclick="continue_push();">Continue</a></li> 
				</ul>
				
			</div>
			<div id ="otpDiv" view="hide" class="row uniform 50%">
				<h2> Enter your OTP </h2>
				<div class="6u 12u$(xsmall)">
					<input type="text" name="otp_login" id="otp_login" value="OTP" />
				</div>
				<div class="mfn-login" style="display: none;">
					<input type="text" class="form-control" name="validateOtpUrl" id="validateOtpUrl" readonly />
				</div>
				<span id="confirm-message2" class="confirm-message"></span>
				<ul class="actions">
					<li><a href="#" class="button" onclick="validateOTP();">Continue</a></li> 
				</ul>
				<div class="row uniform 50%">
					<span style="color:red" id="warningMessage" class="confirm-message"></span>
				</div>
				
			</div>

		</section> 

			<!-- One -->
			<section id="one" class="wrapper style1">
				<div class="container 75%">
					<div class="row 200%">
						<div class="6u 12u$(medium)">
							<header class="major">
								<h2>Welcome to Morgapp</h2>
								<p>The app to show off PingOne capabilities!</p>
							</header>
						</div>
						<div class="6u$ 12u$(medium)">
							<p>Morgapp is a fantastic example of what a customer's website could do when leveraging Ping's platform!</p>
							<p>While on this site we'll show a few different capabilities, like authentication, registration, MFA, and self-service profile management! </p>
						</div>
					</div>
				</div>
			</section>

		<!-- Two -->
			<section id="two" class="wrapper style2 special">
				<div class="container">
					<header class="major">
						<h2>These are some example images</h2>
						<p>We didn't put them here, but man are they pretty</p>
					</header>
					<div class="row 150%">
						<div class="6u 12u$(xsmall)">
							<div class="image fit captioned">
								<img src="images/pic02.jpg" alt="" />
								<h3>Yes, yes, gorgeous</h3>
							</div>
						</div>
						<div class="6u$ 12u$(xsmall)">
							<div class="image fit captioned">
								<img src="images/pic03.jpg" alt="" />
								<h3>So beautiful, amazing</h3>
							</div>
						</div>
					</div>
					<ul class="actions">
						<li><a href="#" class="button special big">This is a big special button example</a></li>
						<li><a href="#" class="button big">This is just a big button example</a></li>
					</ul>
				</div>
			</section>

		<!-- Three -->
			<section id="three" class="wrapper style1">
				<div class="container">
					<header class="major special">
						<h2>More images</h2>
						<p>So cool</p>
					</header>
					<div class="feature-grid">
						<div class="feature">
							<div class="image rounded"><img src="images/pic04.jpg" alt="" /></div>
							<div class="content">
								<header>
									<h4>Cool circle picture</h4>
									<p>Not sure how they made that happen</p>
								</header>
								<p>This is a circle picture that looks very cool and is something that came with the template. I wonder how they made that happen.</p>
							</div>
						</div>
						<div class="feature">
							<div class="image rounded"><img src="images/pic05.jpg" alt="" /></div>
							<div class="content">
								<header>
									<h4>Another circle picture</h4>
									<p>My bafflement continues</p>
								</header>
								<p>Still unsure of how they did this, but if you copy the code from this section you too can make circle pictures.</p>
							</div>
						</div>
						<div class="feature">
							<div class="image rounded"><img src="images/pic06.jpg" alt="" /></div>
							<div class="content">
								<header>
									<h4>I'm dumb and I figured it out</h4>
									<p>You use image rounded for the class</p>
								</header>
								<p>My bafflement has now ceased. Making the images circles was way easier than I anticipated and it's really not even that cool.</p>
							</div>
						</div>
						<div class="feature">
							<div class="image rounded"><img src="images/pic07.jpg" alt="" /></div>
							<div class="content">
								<header>
									<h4>Last One</h4>
									<p>Almost done commenting on circle pictures</p>
								</header>
								<p>We've reached the end of the circle pictures. I wonder if anyone has read down this far... hopefully not. But if for some reason a customer is reading this, you should absolutely go with Ping we fucking rock. </p>
							</div>
						</div>
					</div>
				</div>
			</section>

		<!-- Four -->
			<section id="four" class="wrapper style3 special">
				<div class="container">
					<header class="major">
						<h2>Curtis is the only reason we changed these from latin</h2>
						<p>We got through showing him the entire demo and the main comment he had was that he hated the latin... whoops </p>
					</header>
					<ul class="actions">
						<li><a href="#" class="button special big">Get in touch</a></li>
					</ul>
				</div>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<ul class="icons">
						<li><a href="#" class="icon fa-facebook"></a></li>
						<li><a href="#" class="icon fa-twitter"></a></li>
						<li><a href="#" class="icon fa-instagram"></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Untitled</li>
						<li>Design: <a href="http://templated.co">TEMPLATED</a></li>
						<li>Images: <a href="http://unsplash.com">Unsplash</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/p1helper.js"></script>
			<script src="assets/js/p1Logon.js"></script>
			<script src="assets/js/p1.js"></script>
			
			
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
			


			<script>
// some housekeeping variables

				$('#changePassword').on('input', function (e) {
				let thisPassword = $('#changePassword').val();

				if (regexLower.test(thisPassword)) {
				$('#lowercase').removeClass('text-primary');
				} else {
					$('#lowercase').addClass('text-primary');
				}
				if (regexUpper.test(thisPassword)) {
					$('#uppercase').removeClass('text-primary');
				} else {
					$('#uppercase').addClass('text-primary');
				}

				if (regexNumeric.test(thisPassword)) {
					$('#numeric').removeClass('text-primary');
				} else {
					$('#numeric').addClass('text-primary');
				}

				if (regexSpecial.test(thisPassword)) {
					$('#special').removeClass('text-primary');
				} else {
					$('#special').addClass('text-primary');
				}

				if (regexLength.test(thisPassword)) {
					$('#length').removeClass('text-primary');
				} else {
					$('#length').addClass('text-primary');
				}
			});
			// begin process
			$(document).ready(function () {
				console.log("Page ready function");

				// do I already have a session cookie?

			// 	if (Cookies.get('accessToken') && Cookies.get('idToken')) {
			// 		// yes, user already has a session

			// 		console.log('id_token (' + Cookies.get('idToken') + ')');
			// 		console.log('accessToken (' + Cookies.get('accessToken') + ')');


			// 	} else {
			// 			initiateLogon();
			// 		}

			// })


			if (Cookies.get('accessToken') && Cookies.get('idToken')) {
            // yes, user already has a session
            console.log('id_token (' + Cookies.get('idToken') + ')');
			console.log('accessToken (' + Cookies.get('accessToken') + ')');
			window.location.replace(baseUrl+'/index.html');


          } else {

              // missing accessToken or idToken for this individual

              console.log('No existing user session or token found');
			  // was the user just sent here from p14c?
			  getUrlParameter();
              console.log("flowid value: "+flowId);
              if (flowId) {

                // url has a flowId - so they just arrived from p14c

                console.log('flowId found in url: ' + flowId);
                console.log('User already bootstrapped through p14c');
				console.log('Performing p14c ajax query to determine next step');
				getNextStep(flowId);

              } else {

                // url does not have a flowId.  and we don't have a session.  send them authorizationUrl
                console.log('No flowId found in url');
                console.log('Redirecting to p14c to bootstrap session');
                window.location.replace(authorizationUrl);

              }

			}
		})
	</script>

	</body>
</html>
